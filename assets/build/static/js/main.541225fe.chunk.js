(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports={image:"styles_image__2h23P"}},14:function(e,t,a){e.exports=a(29)},21:function(e,t,a){},24:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),i=a(6),s=a.n(i),u=a(10),l=a(8),p=a(7),h=a(1),f=a(2),m=a(4),d=a(3),v=a(5),g=(a(21),a(13)),b=a.n(g),O=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={play:!1},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.image,n=a.id,o=a.caption,c=a.images,i=c.original,s=c.original_still,u=t.upVote,l=t.downVote,p=this.state.play;return r.a.createElement("div",{className:b.a.image,onMouseEnter:function(){return e.setState({play:!0})},onMouseLeave:function(){return e.setState({play:!1})}},r.a.createElement("img",{alt:o,src:p?i.url:s.url}),r.a.createElement("span",null,r.a.createElement("button",{title:"Up Vote",onClick:function(){return u(n)}},r.a.createElement("svg",null,r.a.createElement("use",{xlinkHref:"#icon-plus"}))),r.a.createElement("button",{title:"Down Vote",onClick:function(){return l(n)}},r.a.createElement("svg",null,r.a.createElement("use",{xlinkHref:"#icon-minus"})))))}}]),t}(n.Component),j=(a(24),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.images,a=e.downVote,n=e.upVote;return r.a.createElement("main",{className:"grid"},t.sort(function(e,t){var a=e.rank.up_votes-e.rank.down_votes,n=t.rank.up_votes-t.rank.down_votes;return a>n?-1:a<n?1:e.import_datetime<t.import_datetime?-1:e.import_datetime>t.import_datetime?1:0}).map(function(e){return r.a.createElement(O,{key:e.id,upVote:n,downVote:a,image:e})}))}}]),t}(n.Component)),k=a(9),w=a.n(k),E=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).page=function(){var e=a.props,t=e.page,n=e.data,r=n.query,o=n.pagination;t(r,o.offset+o.count)},a.renderGrid=function(){if(!a.props.data.data)return null;var e=a.props,t=e.data.data,n=e.data.pagination,o=n.count,c=n.total_count,i=e.upVote,s=e.downVote,u=o<c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{images:t,upVote:i,downVote:s}),r.a.createElement("button",{disabled:!u,onClick:a.page},"Load More"))},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.toggleSearch;return r.a.createElement("main",{className:w.a.main},r.a.createElement("span",{className:w.a.search,onClick:e},r.a.createElement("svg",null,r.a.createElement("use",{xlinkHref:"#icon-search"}))),this.renderGrid())}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleChange=function(e){return a.setState({value:e.target.value})},a.handleSubmit=function(e){var t=a.props.search,n=a.state.value;e.preventDefault(),t(n)},a.state={value:""},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){this.props.isOpen&&this.input.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=(t.toggle,a?"search":"search close");return r.a.createElement("div",{className:n},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{onChange:this.handleChange,ref:function(t){return e.input=t},name:"search",type:"search",placeholder:"Giffy...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),r.a.createElement("span",null,"Hit enter to search")))}}]),t}(n.Component),_="http://localhost:3000/api/v1",S={"Content-Type":"application/json","X-Giffy-Token":Math.floor(1e4*Math.random()+1)},V=function(){var e=Object(p.a)(s.a.mark(function e(t){var a,n,r,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:0,e.next=3,fetch("".concat(_,"/gifs?q=").concat(t,"&offset=").concat(a),{headers:S});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",Object(l.a)({},r,{query:t}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/gifs/").concat(t,"/upvote"),{headers:S,method:"PUT"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/gifs/").concat(t,"/downvote"),{headers:S,method:"PUT"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).toggleSearch=function(){var e=a.state.searchOpen;a.setState({searchOpen:!e})},a.handleSearch=function(){var e=Object(p.a)(s.a.mark(function e(t){var n,r,o,c,i=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:0,r=a.state.gifs,e.next=4,V(t,n);case 4:o=e.sent,r.query===t?((c=Object(l.a)({},r)).data=Object(u.a)(c.data).concat(Object(u.a)(o.data)),c.pagination=o.pagination,a.setState({gifs:c,searchOpen:!1})):a.setState({gifs:o,searchOpen:!1});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleUpVote=function(e){C(e);for(var t=a.state.gifs,n=Object(l.a)({},t),r=0;r<n.data.length;r++)if(n.data[r].id===e){n.data[r].rank.up_votes+=1;break}a.setState({gifs:n})},a.handleDownVote=function(e){x(e);for(var t=a.state.gifs,n=Object(l.a)({},t),r=0;r<n.data.length;r++)if(n.data[r].id===e){n.data[r].rank.down_votes+=1;break}a.setState({gifs:n})},a.state={searchOpen:!1,gifs:{}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.toggleSearch()}},{key:"render",value:function(){var e=this.state,t=e.searchOpen,a=e.gifs,n=t?"frame move":"frame";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:n}),r.a.createElement("div",{className:n}),r.a.createElement("div",{className:n}),r.a.createElement("div",{className:n}),r.a.createElement("div",{className:n},r.a.createElement(E,{page:this.handleSearch,data:a,upVote:this.handleUpVote,downVote:this.handleDownVote,toggleSearch:this.toggleSearch})),r.a.createElement(y,{search:this.handleSearch,isOpen:t,toggle:this.toggleSearch}))}}]),t}(n.Component);a(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports={main:"styles_main__3kVuD",search:"styles_search__p7U5e"}}},[[14,2,1]]]);
//# sourceMappingURL=main.541225fe.chunk.js.map